!function(e,t){var n,r=wp.customize;n=function(e,t,n){var r;return function(){var i=arguments;n=n||this,clearTimeout(r),r=setTimeout(function(){r=null,e.apply(n,i)},t)}},r.Preview=r.Messenger.extend({initialize:function(e,i){var s=this;r.Messenger.prototype.initialize.call(this,e,i),this.body=t(document.body),this.body.on("click.preview","a",function(e){e.preventDefault(),s.send("scroll",0),s.send("url",t(this).prop("href"))}),this.body.on("submit.preview","form",function(e){e.preventDefault()}),this.window=t(window),this.window.on("scroll.preview",n(function(){s.send("scroll",s.window.scrollTop())},200)),this.bind("scroll",function(e){s.window.scrollTop(e)})}}),t(function(){if(r.settings=window._wpCustomizeSettings,r.settings){var e,n;e=new r.Preview({url:window.location.href,channel:r.settings.channel}),e.bind("settings",function(e){t.each(e,function(e,t){r.has(e)?r(e).set(t):r.create(e,t)})}),e.trigger("settings",r.settings.values),e.bind("setting",function(e){var t;e=e.slice(),(t=r(e.shift()))&&t.set.apply(t,e)}),e.bind("sync",function(n){t.each(n,function(t,n){e.trigger(t,n)}),e.send("synced")}),e.bind("active",function(){r.settings.nonce&&e.send("nonce",r.settings.nonce)}),e.send("ready"),n=t.map(["color","image","position_x","repeat","attachment"],function(e){return"background_"+e}),r.when.apply(r,n).done(function(e,n,r,i,s){var o,u=t(document.body),a=t("head"),f=t("#custom-background-css");(!u.hasClass("custom-background")||f.length)&&(o=function(){var o="";u.toggleClass("custom-background",!!e()||!!n()),e()&&(o+="background-color: "+e()+";"),n()&&(o+='background-image: url("'+n()+'");',o+="background-position: top "+r()+";",o+="background-repeat: "+i()+";",o+="background-attachment: "+s()+";"),f.remove(),f=t('<style type="text/css" id="custom-background-css">body.custom-background { '+o+" }</style>").appendTo(a)},t.each(arguments,function(){this.bind(o)}))})}})}(wp,jQuery);