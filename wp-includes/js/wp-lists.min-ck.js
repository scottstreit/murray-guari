!function(e){var t,n={add:"ajaxAdd",del:"ajaxDel",dim:"ajaxDim",process:"process",recolor:"recolor"};t={settings:{url:ajaxurl,type:"POST",response:"ajax-response",what:"",alt:"alternate",altOffset:0,addColor:null,delColor:null,dimAddColor:null,dimDelColor:null,confirm:null,addBefore:null,addAfter:null,delBefore:null,delAfter:null,dimBefore:null,dimAfter:null},nonce:function(t,n){var r=wpAjax.unserialize(t.attr("href"));return n.nonce||r._ajax_nonce||e("#"+n.element+' input[name="_ajax_nonce"]').val()||r._wpnonce||e("#"+n.element+' input[name="_wpnonce"]').val()||0},parseData:function(t,n){var r,i=[];try{r=e(t).attr("data-wp-lists")||"",r=r.match(new RegExp(n+":[\\S]+")),r&&(i=r[0].split(":"))}catch(s){}return i},pre:function(t,n,r){var i,s;return n=e.extend({},this.wpList.settings,{element:null,nonce:0,target:t.get(0)},n||{}),e.isFunction(n.confirm)&&("add"!=r&&(i=e("#"+n.element).css("backgroundColor"),e("#"+n.element).css("backgroundColor","#FF9966")),s=n.confirm.call(this,t,n,r,i),"add"!=r&&e("#"+n.element).css("backgroundColor",i),!s)?!1:n},ajaxAdd:function(n,r){n=e(n),r=r||{};var i,s,o,u,f,l=this,c=t.parseData(n,"add");return r=t.pre.call(l,n,r,"add"),r.element=c[2]||n.attr("id")||r.element||null,r.addColor=c[3]?"#"+c[3]:r.addColor||"#FFFF33",r?n.is('[id="'+r.element+'-submit"]')?r.element?(r.action="add-"+r.what,r.nonce=t.nonce(n,r),i=e("#"+r.element+" :input").not('[name="_ajax_nonce"], [name="_wpnonce"], [name="action"]'),(s=wpAjax.validateForm("#"+r.element))?(r.data=e.param(e.extend({_ajax_nonce:r.nonce,action:r.action},wpAjax.unserialize(c[4]||""))),o=e.isFunction(i.fieldSerialize)?i.fieldSerialize():i.serialize(),o&&(r.data+="&"+o),e.isFunction(r.addBefore)&&(r=r.addBefore(r),!r)?!0:r.data.match(/_ajax_nonce=[a-f0-9]+/)?(r.success=function(n){return u=wpAjax.parseAjaxResponse(n,r.response,r.element),f=n,!u||u.errors?!1:!0===u?!0:(jQuery.each(u.responses,function(){t.add.call(l,this.data,e.extend({},r,{pos:this.position||0,id:this.id||0,oldId:this.oldId||null}))}),l.wpList.recolor(),e(l).trigger("wpListAddEnd",[r,l.wpList]),t.clear.call(l,"#"+r.element),void 0)},r.complete=function(t,n){if(e.isFunction(r.addAfter)){var i=e.extend({xml:t,status:n,parsed:u},r);r.addAfter(f,i)}},e.ajax(r),!1):!0):!1):!0:!t.add.call(l,n,r):!1},ajaxDel:function(n,r){n=e(n),r=r||{};var i,s,o,u=this,f=t.parseData(n,"delete");return r=t.pre.call(u,n,r,"delete"),r.element=f[2]||r.element||null,r.delColor=f[3]?"#"+f[3]:r.delColor||"#faa",r&&r.element?(r.action="delete-"+r.what,r.nonce=t.nonce(n,r),r.data=e.extend({action:r.action,id:r.element.split("-").pop(),_ajax_nonce:r.nonce},wpAjax.unserialize(f[4]||"")),e.isFunction(r.delBefore)&&(r=r.delBefore(r,u),!r)?!0:r.data._ajax_nonce?(i=e("#"+r.element),"none"!=r.delColor?i.css("backgroundColor",r.delColor).fadeOut(350,function(){u.wpList.recolor(),e(u).trigger("wpListDelEnd",[r,u.wpList])}):(u.wpList.recolor(),e(u).trigger("wpListDelEnd",[r,u.wpList])),r.success=function(t){return s=wpAjax.parseAjaxResponse(t,r.response,r.element),o=t,!s||s.errors?(i.stop().stop().css("backgroundColor","#faa").show().queue(function(){u.wpList.recolor(),e(this).dequeue()}),!1):void 0},r.complete=function(t,n){e.isFunction(r.delAfter)&&i.queue(function(){var i=e.extend({xml:t,status:n,parsed:s},r);r.delAfter(o,i)}).dequeue()},e.ajax(r),!1):!0):!1},ajaxDim:function(n,r){if("none"==e(n).parent().css("display"))return!1;n=e(n),r=r||{};var i,s,o,u,f,l,c=this,h=t.parseData(n,"dim");return r=t.pre.call(c,n,r,"dim"),r.element=h[2]||r.element||null,r.dimClass=h[3]||r.dimClass||null,r.dimAddColor=h[4]?"#"+h[4]:r.dimAddColor||"#FFFF33",r.dimDelColor=h[5]?"#"+h[5]:r.dimDelColor||"#FF3333",r&&r.element&&r.dimClass?(r.action="dim-"+r.what,r.nonce=t.nonce(n,r),r.data=e.extend({action:r.action,id:r.element.split("-").pop(),dimClass:r.dimClass,_ajax_nonce:r.nonce},wpAjax.unserialize(h[6]||"")),e.isFunction(r.dimBefore)&&(r=r.dimBefore(r),!r)?!0:(i=e("#"+r.element),s=i.toggleClass(r.dimClass).is("."+r.dimClass),o=t.getColor(i),i.toggleClass(r.dimClass),u=s?r.dimAddColor:r.dimDelColor,"none"!=u?i.animate({backgroundColor:u},"fast").queue(function(){i.toggleClass(r.dimClass),e(this).dequeue()}).animate({backgroundColor:o},{complete:function(){e(this).css("backgroundColor",""),e(c).trigger("wpListDimEnd",[r,c.wpList])}}):e(c).trigger("wpListDimEnd",[r,c.wpList]),r.data._ajax_nonce?(r.success=function(t){return f=wpAjax.parseAjaxResponse(t,r.response,r.element),l=t,!f||f.errors?(i.stop().stop().css("backgroundColor","#FF3333")[s?"removeClass":"addClass"](r.dimClass).show().queue(function(){c.wpList.recolor(),e(this).dequeue()}),!1):void 0},r.complete=function(t,n){e.isFunction(r.dimAfter)&&i.queue(function(){var i=e.extend({xml:t,status:n,parsed:f},r);r.dimAfter(l,i)}).dequeue()},e.ajax(r),!1):!0)):!0},getColor:function(e){var t=jQuery(e).css("backgroundColor");return t||"#ffffff"},add:function(n,r){n=e(e.trim(n));var i,s,o,u=e(this),f=!1,l={pos:0,id:0,oldId:null};return"string"==typeof r&&(r={what:r}),r=e.extend(l,this.wpList.settings,r),n.size()&&r.what?(r.oldId&&(f=e("#"+r.what+"-"+r.oldId)),!r.id||r.id==r.oldId&&f&&f.size()||e("#"+r.what+"-"+r.id).remove(),f&&f.size()?(f.before(n),f.remove()):isNaN(r.pos)?(i="after","-"==r.pos.substr(0,1)&&(r.pos=r.pos.substr(1),i="before"),s=u.find("#"+r.pos),1===s.size()?s[i](n):u.append(n)):("comment"!=r.what||0===e("#"+r.element).length)&&(r.pos<0?u.prepend(n):u.append(n)),r.alt&&((u.children(":visible").index(n[0])+r.altOffset)%2?n.removeClass(r.alt):n.addClass(r.alt)),"none"!=r.addColor&&(o=t.getColor(n),n.css("backgroundColor",r.addColor).animate({backgroundColor:o},{complete:function(){e(this).css("backgroundColor","")}})),u.each(function(){this.wpList.process(n)}),n):!1},clear:function(t){var n,r,i=this;t=e(t),i.wpList&&t.parents("#"+i.id).size()||t.find(":input").each(function(){e(this).parents(".form-no-clear").size()||(n=this.type.toLowerCase(),r=this.tagName.toLowerCase(),"text"==n||"password"==n||"textarea"==r?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==r&&(this.selectedIndex=null))})},process:function(t){var n=this,r=e(t||document);r.delegate('form[data-wp-lists^="add:'+n.id+':"]',"submit",function(){return n.wpList.add(this)}),r.delegate('a[data-wp-lists^="add:'+n.id+':"], input[data-wp-lists^="add:'+n.id+':"]',"click",function(){return n.wpList.add(this)}),r.delegate('[data-wp-lists^="delete:'+n.id+':"]',"click",function(){return n.wpList.del(this)}),r.delegate('[data-wp-lists^="dim:'+n.id+':"]',"click",function(){return n.wpList.dim(this)})},recolor:function(){var t,n,r=this;r.wpList.settings.alt&&(t=e(".list-item:visible",r),t.size()||(t=e(r).children(":visible")),n=[":even",":odd"],r.wpList.settings.altOffset%2&&n.reverse(),t.filter(n[0]).addClass(r.wpList.settings.alt).end().filter(n[1]).removeClass(r.wpList.settings.alt))},init:function(){var e=this;e.wpList.process=function(t){e.each(function(){this.wpList.process(t)})},e.wpList.recolor=function(){e.each(function(){this.wpList.recolor()})}}},e.fn.wpList=function(r){return this.each(function(){var i=this;this.wpList={settings:e.extend({},t.settings,{what:t.parseData(this,"list")[1]||""},r)},e.each(n,function(e,n){i.wpList[e]=function(e,r){return t[n].call(i,e,r)}})}),t.init.call(this),this.wpList.process(),this}}(jQuery);